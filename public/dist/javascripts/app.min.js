var myApp=angular.module("myApp",["ngRoute","ngAnimate","infinite-scroll","appRoutes","homeCtrl","homeService","playStationCtrl","playStationService"]);myApp.controller("titleController",["$scope","$route",function($scope,$route){$scope.$on("$routeChangeSuccess",function(){$scope.title=$route.current.title})}]),myApp.controller("headerController",["$scope","$location",function($scope,$location){$scope.isActive=function(viewLocation){return viewLocation===$location.path()}}]),myApp.run(function($http){$http.defaults.headers.common.auth="ljpon3UUVTMMmIhE6Kcf"}),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"views/index.html",controller:"homeController",title:"Home"}).when("/playstation",{templateUrl:"views/playstation.html",controller:"playStationController",title:"PlayStation"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0)}]);var homeCtrl=angular.module("homeCtrl",[]);homeCtrl.controller("homeController",function($scope,homeLinks){$scope.formData={},homeLinks.get().success(function(data){$scope.homeLinks=data}),$scope.mouseEnter=function(homeLink){$scope.title=homeLink.title},$scope.mouseLeave=function(){$scope.title=""}}),homeCtrl.directive("ngHome",["$timeout",function(timer){return{restrict:"A",replace:!0,link:function(scope,element){var imageLoad=function(){var backgroundImage=new Image;$(backgroundImage).attr("src","http://bill0106.com/images/505afb6ff668f345f4b5ea4cd1fba976.jpg").bind("load",function(){$("div.page-loading").addClass("animated fadeOut"),setTimeout(function(){element.addClass("animated fadeIn")},350)})};timer(imageLoad,0)}}}]);var playStationCtrl=angular.module("playStationCtrl",[]);playStationCtrl.controller("playStationController",function($scope,Games){Games.get().success(function(data){for(var gamesData=data.reverse(),length=gamesData.length,count=Math.ceil(length/3),start=0,gamesArray=[],i=0;count>i;i++){var end=start+3;end>length&&(end=length),gamesArray.push(gamesData.slice(start,end)),start+=3}$scope.gamesArray=gamesArray.splice(0,4),$scope.loadMore=function(){var num=2,total=gamesArray.length;num>total&&(num=total);var gamesMore=gamesArray.splice(0,num);angular.forEach(gamesMore,function(value){$scope.gamesArray.push(value)})}}),$scope.getNumber=function(num){return new Array(num)}});var homeService=angular.module("homeService",[]);homeService.factory("homeLinks",function($http){return{get:function(){return $http.get("/api/homelinks")}}});var playStationService=angular.module("playStationService",[]);playStationService.factory("Games",function($http){return{get:function(){return $http.get("/api/games")}}});